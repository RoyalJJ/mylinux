
<!-- saved from url=(0088)http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <title>EXERCISE</title> 
   
  <script type="text/javascript" src="./01EXERCISE_files/jquery.min.js">
    </script> 
  <script type="text/javascript" src="./01EXERCISE_files/jquery.snippet.js">
    </script> 
  <script type="text/javascript" src="./01EXERCISE_files/main.js">
    </script> 
  <link type="text/css" href="./01EXERCISE_files/index.css" rel="Stylesheet"> 
  <link type="text/css" href="./01EXERCISE_files/jquery.snippet.css" rel="Stylesheet"> 
 </head> 
 <body> 
  <div class="source_style_exercise"> 
   <div> 
    <h3>1 配置新建用户时的属性限制</h3> 
    <p>对于新创建的用户，要求其密码最长使用时间为60天，密码最短使用时间为1天，在密码过期前7天内发出警告。</p> 
    <p class="answerTitle">参考答案</p> 
    <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style=""><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># <span class="sh_normal">vim </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>login<span class="sh_symbol">.</span>defs</li><li>PASS_MAX_DAYS   <span class="sh_number">60</span></li><li>PASS_MIN_DAYS   <span class="sh_number">1</span></li><li>PASS_WARN_AGE   <span class="sh_number">7</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# vim /etc/login.defs
PASS_MAX_DAYS   60
PASS_MIN_DAYS   1
PASS_WARN_AGE   7
</pre></div></div> 
   </div> 
   <div> 
    <h3>2 利用su命令切换用户身份</h3> 
    <p>1）使用su以用户mike的身份创建文件/tmp/mike.txt。</p> 
    <p>2）使用su以用户jerry的身份列出最近10条历史命令，保存为~/h10.txt文件。</p> 
    <p class="answerTitle">参考答案</p> 
    <p>1）使用su以用户mike的身份创建文件/tmp/mike.txt。</p> 
    <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style=""><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># su <span class="sh_symbol">-</span> mike <span class="sh_symbol">-</span>c <span class="sh_string">"touch /tmp/mike.txt"</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># ls <span class="sh_symbol">-</span><span class="sh_normal">lh </span><span class="sh_symbol">/</span><span class="sh_normal">tmp</span><span class="sh_symbol">/</span>mike<span class="sh_symbol">.</span>txt </li><li><span class="sh_symbol">-</span>rw<span class="sh_symbol">-</span>rw<span class="sh_symbol">-</span>r<span class="sh_symbol">--.</span> <span class="sh_number">1</span> mike mike <span class="sh_number">0</span> <span class="sh_number">5</span>月  <span class="sh_number">17</span> <span class="sh_number">12</span><span class="sh_symbol">:</span><span class="sh_number">35</span><span class="sh_normal"> </span><span class="sh_symbol">/</span><span class="sh_normal">tmp</span><span class="sh_symbol">/</span>mike<span class="sh_symbol">.</span>txt</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# su - mike -c "touch /tmp/mike.txt"
[root@svr5 ~]# ls -lh /tmp/mike.txt 
-rw-rw-r--. 1 mike mike 0 5月  17 12:35 /tmp/mike.txt
</pre></div></div> 
    <p>2）使用su以用户jerry的身份列出最近10条历史命令，保存为~/h10.txt文件。</p> 
    <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style=""><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># su <span class="sh_symbol">-</span> jerry <span class="sh_symbol">-</span>c <span class="sh_string">"tail ~/.bash_history &gt; ~/h10.txt"</span></li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># ls <span class="sh_symbol">-</span>lh <span class="sh_symbol">~</span><span class="sh_normal">jerry</span><span class="sh_symbol">/</span>h10<span class="sh_symbol">.</span>txt </li><li><span class="sh_symbol">-</span>rw<span class="sh_symbol">-</span>rw<span class="sh_symbol">-</span>r<span class="sh_symbol">--.</span> <span class="sh_number">1</span> jerry jerry <span class="sh_number">152</span> <span class="sh_number">5</span>月  <span class="sh_number">17</span> <span class="sh_number">12</span><span class="sh_symbol">:</span><span class="sh_number">39</span><span class="sh_normal"> </span><span class="sh_symbol">/</span><span class="sh_normal">home</span><span class="sh_symbol">/</span><span class="sh_normal">jerry</span><span class="sh_symbol">/</span>h10<span class="sh_symbol">.</span>txt</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# su - jerry -c "tail ~/.bash_history &gt; ~/h10.txt"
[root@svr5 ~]# ls -lh ~jerry/h10.txt 
-rw-rw-r--. 1 jerry jerry 152 5月  17 12:39 /home/jerry/h10.txt
</pre></div></div> 
   </div> 
   <div> 
    <h3>3 通过sudo机制为普通用户提权</h3> 
    <p>创建bob和alice两个用户，要求这两个用户不切换成管理员即可以执行如下命令：useradd/usermod/userdel/passwd，其中利用passwd可以修改其他用户密码。</p> 
    <p class="answerTitle">参考答案</p> 
    <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style=""><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># useradd bob</li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># useradd alice</li><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># visudo</li><li>User_Alias USER_ADMINS <span class="sh_symbol">=</span> bob<span class="sh_symbol">,</span> alice</li><li>Cmnd_Alias USER_OP <span class="sh_symbol">=</span> <span class="sh_regexp">/usr/</span><span class="sh_normal">sbin</span><span class="sh_symbol">/</span>useradd<span class="sh_symbol">,</span> <span class="sh_regexp">/usr/</span><span class="sh_normal">bin</span><span class="sh_symbol">/</span>passwd<span class="sh_symbol">,</span> <span class="sh_regexp">/usr/</span><span class="sh_normal">sbin</span><span class="sh_symbol">/</span>usermod<span class="sh_symbol">,</span> <span class="sh_regexp">/usr/</span><span class="sh_normal">sbin</span><span class="sh_symbol">/</span>userdel</li><li>USER_ADMINS        ALL<span class="sh_symbol">=(</span>ALL<span class="sh_symbol">)</span>      USER_OP</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# useradd bob
[root@svr5 ~]# useradd alice
[root@svr5 ~]# visudo
User_Alias USER_ADMINS = bob, alice
Cmnd_Alias USER_OP = /usr/sbin/useradd, /usr/bin/passwd, /usr/sbin/usermod, /usr/sbin/userdel
USER_ADMINS        ALL=(ALL)      USER_OP
</pre></div></div> 
   </div> 
   <div> 
    <h3>4 阅读下列SSH配置，在括号内注明含义</h3> 
    <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># <span class="sh_normal">vim </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span><span class="sh_normal">ssh</span><span class="sh_symbol">/</span>sshd_config</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li>Protocol  <span class="sh_number">2</span>      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//（        ）</span></li><li>PermitRootLogin  no  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//（        ）</span></li><li>UseDNS  no       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//（        ）</span></li><li>MaxAuthTries  <span class="sh_number">6</span>   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//（        ）</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# vim /etc/ssh/sshd_config
.. ..
Protocol  2      				//（        ）
PermitRootLogin  no  			//（        ）
UseDNS  no       				//（        ）
MaxAuthTries  6   				//（        ）
</pre></div></div> 
    <p class="answerTitle">参考答案</p> 
    <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/VIP/NSDVN201805/SECURITY/DAY01/EXERCISE/01/index_answer.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@svr5 <span class="sh_symbol">~]</span># <span class="sh_normal">vim </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span><span class="sh_normal">ssh</span><span class="sh_symbol">/</span>sshd_config</li><li><span class="sh_symbol">..</span> <span class="sh_symbol">..</span></li><li>Protocol  <span class="sh_number">2</span>      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//（指定SSH协议使用第二版本）</span></li><li>PermitRootLogin  no  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//（不允许以root身份登录）</span></li><li>UseDNS  no       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//（不进行DNS反向解析，以提高响应速度）</span></li><li>MaxAuthTries  <span class="sh_number">6</span>   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//（限定最大密码错误次数）</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@svr5 ~]# vim /etc/ssh/sshd_config
.. ..
Protocol  2      				//（指定SSH协议使用第二版本）
PermitRootLogin  no  			//（不允许以root身份登录）
UseDNS  no       				//（不进行DNS反向解析，以提高响应速度）
MaxAuthTries  6   				//（限定最大密码错误次数）
</pre></div></div> 
   </div> 
   <div> 
    <h3>5 简述实现SSH密钥对验证的基本过程</h3> 
    <p class="answerTitle">参考答案</p> 
    <p>1）用户在客户端生成密钥对；</p> 
    <p>2）用户将公钥上传至目标服务器；</p> 
    <p>3）在服务器上将用户上传的公钥导入到指定用户的~/.ssh/authorized_keys中；</p> 
    <p>4）客户端连接验证。</p> 
   </div> 
  </div>  
 
</body></html>